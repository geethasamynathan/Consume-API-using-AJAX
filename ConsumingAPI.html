<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Simple API Consume example</title>
  </head>

  <body>
    <h1>AJAX example</h1>
    <p>Click the button below to fetch deta from server or API</p>

    <button onclick="loadData()">Fetch Data</button>
    <div id="result"></div>

    <script>
      function loadData() {
        const xhr = new XMLHttpRequest();
        xhr.open("GET", "https://localhost:7105/api/Departments", true);

        xhr.onreadystatechange = function () {
          if (xhr.readyState === 4 && xhr.status === 200) {
            const data = JSON.parse(xhr.responseText);
            var resultHtml = "<h3>Data fetched</h3>"; // Start with a header

            for (var i = 0; i < data.length; i++) {
              resultHtml += `
                    <p><strong>Id:</strong> ${data[i].id}</p>
                    <p><strong>Name:</strong> ${data[i].name}</p>
                    <p><strong>Department Head:</strong> ${data[i].departmentHead}</p>
                    <hr />`; // Add a separator line between records
            }
            document.getElementById("result").innerHTML = resultHtml;
          }
        };
        xhr.send();
      }
    </script>
  </body>
</html>
